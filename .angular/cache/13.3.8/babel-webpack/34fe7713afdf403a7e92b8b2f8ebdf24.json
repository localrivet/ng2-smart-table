{"ast":null,"code":"import { EventEmitter, SimpleChanges } from '@angular/core';\nimport { DataSource } from '../../lib/data-source/data-source';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\n\nfunction PagerComponent_nav_0_li_14_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"span\", 7);\n    i0.ɵɵtext(3, \"(current)\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const page_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", page_r3, \" \");\n  }\n}\n\nfunction PagerComponent_nav_0_li_14_a_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 15);\n    i0.ɵɵlistener(\"click\", function PagerComponent_nav_0_li_14_a_2_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const page_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.paginate(page_r3);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const page_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(page_r3);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    active: a0\n  };\n};\n\nfunction PagerComponent_nav_0_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 4);\n    i0.ɵɵtemplate(1, PagerComponent_nav_0_li_14_span_1_Template, 4, 1, \"span\", 12);\n    i0.ɵɵtemplate(2, PagerComponent_nav_0_li_14_a_2_Template, 2, 1, \"a\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const page_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx_r2.getPage() == page_r3));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.getPage() == page_r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.getPage() != page_r3);\n  }\n}\n\nconst _c1 = function (a0) {\n  return {\n    disabled: a0\n  };\n};\n\nfunction PagerComponent_nav_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"nav\", 2)(1, \"ul\", 3)(2, \"li\", 4)(3, \"a\", 5);\n    i0.ɵɵlistener(\"click\", function PagerComponent_nav_0_Template_a_click_3_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.getPage() == 1 ? false : ctx_r11.paginate(1);\n    });\n    i0.ɵɵelementStart(4, \"span\", 6);\n    i0.ɵɵtext(5, \"\\u00AB\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 7);\n    i0.ɵɵtext(7, \"First\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"li\", 4)(9, \"a\", 8);\n    i0.ɵɵlistener(\"click\", function PagerComponent_nav_0_Template_a_click_9_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.getPage() == 1 ? false : ctx_r13.prev();\n    });\n    i0.ɵɵelementStart(10, \"span\", 6);\n    i0.ɵɵtext(11, \"<\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"span\", 7);\n    i0.ɵɵtext(13, \"Prev\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(14, PagerComponent_nav_0_li_14_Template, 3, 5, \"li\", 9);\n    i0.ɵɵelementStart(15, \"li\", 4)(16, \"a\", 10);\n    i0.ɵɵlistener(\"click\", function PagerComponent_nav_0_Template_a_click_16_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.getPage() == ctx_r14.getLast() ? false : ctx_r14.next();\n    });\n    i0.ɵɵelementStart(17, \"span\", 6);\n    i0.ɵɵtext(18, \">\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"span\", 7);\n    i0.ɵɵtext(20, \"Next\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(21, \"li\", 4)(22, \"a\", 11);\n    i0.ɵɵlistener(\"click\", function PagerComponent_nav_0_Template_a_click_22_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.getPage() == ctx_r15.getLast() ? false : ctx_r15.paginate(ctx_r15.getLast());\n    });\n    i0.ɵɵelementStart(23, \"span\", 6);\n    i0.ɵɵtext(24, \"\\u00BB\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"span\", 7);\n    i0.ɵɵtext(26, \"Last\");\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(5, _c1, ctx_r0.getPage() == 1));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c1, ctx_r0.getPage() == 1));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.getPages());\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c1, ctx_r0.getPage() == ctx_r0.getLast()));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(11, _c1, ctx_r0.getPage() == ctx_r0.getLast()));\n  }\n}\n\nfunction PagerComponent_nav_1_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r17 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r17);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r17);\n  }\n}\n\nfunction PagerComponent_nav_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"nav\", 16)(1, \"label\", 17);\n    i0.ɵɵtext(2, \" Per Page: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 18);\n    i0.ɵɵlistener(\"change\", function PagerComponent_nav_1_Template_select_change_3_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.onChangePerPage($event);\n    })(\"ngModelChange\", function PagerComponent_nav_1_Template_select_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.currentPerPage = $event;\n    });\n    i0.ɵɵtemplate(4, PagerComponent_nav_1_option_4_Template, 2, 2, \"option\", 19);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.currentPerPage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.perPageSelect);\n  }\n}\n\nexport let PagerComponent = /*#__PURE__*/(() => {\n  class PagerComponent {\n    constructor() {\n      this.perPageSelect = [];\n      this.changePage = new EventEmitter();\n      this.count = 0;\n    }\n\n    ngOnChanges(changes) {\n      if (changes.source) {\n        if (!changes.source.firstChange) {\n          this.dataChangedSub.unsubscribe();\n        }\n\n        this.dataChangedSub = this.source.onChanged().subscribe(dataChanges => {\n          this.page = this.source.getPaging().page;\n          this.perPage = this.source.getPaging().perPage;\n          this.currentPerPage = this.perPage;\n          this.count = this.source.count();\n\n          if (this.isPageOutOfBounce()) {\n            this.source.setPage(--this.page);\n          }\n\n          this.processPageChange(dataChanges);\n          this.initPages();\n        });\n      }\n    }\n    /**\n     * We change the page here depending on the action performed against data source\n     * if a new element was added to the end of the table - then change the page to the last\n     * if a new element was added to the beginning of the table - then to the first page\n     * @param changes\n     */\n\n\n    processPageChange(changes) {\n      if (changes['action'] === 'prepend') {\n        this.source.setPage(1);\n      }\n\n      if (changes['action'] === 'append') {\n        this.source.setPage(this.getLast());\n      }\n    }\n\n    shouldShow() {\n      return this.source.count() > this.perPage;\n    }\n\n    paginate(page) {\n      this.source.setPage(page);\n      this.page = page;\n      this.changePage.emit({\n        page\n      });\n      return false;\n    }\n\n    next() {\n      return this.paginate(this.getPage() + 1);\n    }\n\n    prev() {\n      return this.paginate(this.getPage() - 1);\n    }\n\n    getPage() {\n      return this.page;\n    }\n\n    getPages() {\n      return this.pages;\n    }\n\n    getLast() {\n      return Math.ceil(this.count / this.perPage);\n    }\n\n    isPageOutOfBounce() {\n      return this.page * this.perPage >= this.count + this.perPage && this.page > 1;\n    }\n\n    initPages() {\n      const pagesCount = this.getLast();\n      let showPagesCount = 4;\n      showPagesCount = pagesCount < showPagesCount ? pagesCount : showPagesCount;\n      this.pages = [];\n\n      if (this.shouldShow()) {\n        let middleOne = Math.ceil(showPagesCount / 2);\n        middleOne = this.page >= middleOne ? this.page : middleOne;\n        let lastOne = middleOne + Math.floor(showPagesCount / 2);\n        lastOne = lastOne >= pagesCount ? pagesCount : lastOne;\n        const firstOne = lastOne - showPagesCount + 1;\n\n        for (let i = firstOne; i <= lastOne; i++) {\n          this.pages.push(i);\n        }\n      }\n    }\n\n    onChangePerPage(event) {\n      if (this.currentPerPage) {\n        if (typeof this.currentPerPage === 'string' && this.currentPerPage.toLowerCase() === 'all') {\n          this.source.getPaging().perPage = null;\n        } else {\n          this.source.getPaging().perPage = this.currentPerPage * 1;\n          this.source.refresh();\n        }\n\n        this.initPages();\n      }\n    }\n\n  }\n\n  PagerComponent.ɵfac = function PagerComponent_Factory(t) {\n    return new (t || PagerComponent)();\n  };\n\n  PagerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PagerComponent,\n    selectors: [[\"ng2-smart-table-pager\"]],\n    inputs: {\n      source: \"source\",\n      perPageSelect: \"perPageSelect\"\n    },\n    outputs: {\n      changePage: \"changePage\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 2,\n    vars: 2,\n    consts: [[\"class\", \"ng2-smart-pagination-nav\", 4, \"ngIf\"], [\"class\", \"ng2-smart-pagination-per-page\", 4, \"ngIf\"], [1, \"ng2-smart-pagination-nav\"], [1, \"ng2-smart-pagination\", \"pagination\"], [1, \"ng2-smart-page-item\", \"page-item\", 3, \"ngClass\"], [\"href\", \"#\", \"aria-label\", \"First\", 1, \"ng2-smart-page-link\", \"page-link\", 3, \"click\"], [\"aria-hidden\", \"true\"], [1, \"sr-only\"], [\"href\", \"#\", \"aria-label\", \"Prev\", 1, \"ng2-smart-page-link\", \"page-link\", \"page-link-prev\", 3, \"click\"], [\"class\", \"ng2-smart-page-item page-item\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [\"href\", \"#\", \"aria-label\", \"Next\", 1, \"ng2-smart-page-link\", \"page-link\", \"page-link-next\", 3, \"click\"], [\"href\", \"#\", \"aria-label\", \"Last\", 1, \"ng2-smart-page-link\", \"page-link\", 3, \"click\"], [\"class\", \"ng2-smart-page-link page-link\", 4, \"ngIf\"], [\"class\", \"ng2-smart-page-link page-link\", \"href\", \"#\", 3, \"click\", 4, \"ngIf\"], [1, \"ng2-smart-page-link\", \"page-link\"], [\"href\", \"#\", 1, \"ng2-smart-page-link\", \"page-link\", 3, \"click\"], [1, \"ng2-smart-pagination-per-page\"], [\"for\", \"per-page\"], [\"id\", \"per-page\", 3, \"ngModel\", \"change\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]],\n    template: function PagerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, PagerComponent_nav_0_Template, 27, 13, \"nav\", 0);\n        i0.ɵɵtemplate(1, PagerComponent_nav_1_Template, 5, 2, \"nav\", 1);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.shouldShow());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.perPageSelect && ctx.perPageSelect.length > 0);\n      }\n    },\n    directives: [i1.NgIf, i1.NgClass, i1.NgForOf, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgModel, i2.NgSelectOption, i2.ɵNgSelectMultipleOption],\n    styles: [\".ng2-smart-pagination[_ngcontent-%COMP%]{display:inline-flex;font-size:.875em;padding:0}.ng2-smart-pagination[_ngcontent-%COMP%]   .sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.ng2-smart-pagination[_ngcontent-%COMP%]   .ng2-smart-page-item[_ngcontent-%COMP%]{display:inline}.ng2-smart-pagination[_ngcontent-%COMP%]   .page-link-next[_ngcontent-%COMP%], .ng2-smart-pagination[_ngcontent-%COMP%]   .page-link-prev[_ngcontent-%COMP%]{font-size:10px}[_nghost-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]   select[_ngcontent-%COMP%]{margin:1rem 0 1rem 1rem}[_nghost-%COMP%]   label[_ngcontent-%COMP%]{margin:1rem 0 1rem 1rem;line-height:2.5rem}\"]\n  });\n  return PagerComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}